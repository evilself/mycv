<div class="search-container">
  <mat-form-field>
    <input type="text" matInput (keyup)="applyFilter($event.target.value)" placeholder="Search on current page">
  </mat-form-field>
</div>

<div class="table-container mat-elevation-z8">
  <mat-progress-bar [style.opacity]="(isLoading$ | async) ? '1' : '0'" mode="indeterminate"></mat-progress-bar>

  <mat-table [dataSource]="dataSource" matSort (matSortChange)="sortData($event)">
    <ng-container matColumnDef="firstName">
      <mat-header-cell *matHeaderCellDef mat-sort-header>First Name</mat-header-cell>
      <mat-cell *matCellDef="let row"> {{row.firstName}} </mat-cell>
    </ng-container>

    <ng-container matColumnDef="lastName">
      <mat-header-cell *matHeaderCellDef mat-sort-header>Last Name</mat-header-cell>
      <mat-cell *matCellDef="let row"> {{row.lastName}} </mat-cell>
    </ng-container>

    <ng-container matColumnDef="email">
      <mat-header-cell *matHeaderCellDef mat-sort-header>Email</mat-header-cell>
      <mat-cell *matCellDef="let row"> {{row.email}} </mat-cell>
    </ng-container>

    <ng-container matColumnDef="dateOfBirth">
      <mat-header-cell *matHeaderCellDef mat-sort-header>Date of birth</mat-header-cell>
      <mat-cell *matCellDef="let row"> {{ row.dateOfBirth || '--' }} </mat-cell>
    </ng-container>

    <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
    <mat-row [ngClass]="{'active':  row.active}" (click)="selectRow(row)" *matRowDef="let row; columns: displayedColumns;"></mat-row>
  </mat-table>

  <div class="table-footer">
    <app-actions
      [data]="selectedUser$ | async"
      [showUserActions]="showUserActions$ | async"
      (addEditUser)="openAddEditDialog($event)"
      (deleteUser)="confirmDeleteDialog($event)">
    </app-actions>

    <app-paginator
      (nextPage)="page$.next($event)"
      (nextSize)="size$.next($event)"
      [pageSize]="size$.getValue()"
      [currentPage]="(query$ | async)?.number"
      [totalPages]="(query$ | async)?.totalPages">
    </app-paginator>
  </div>
</div>
